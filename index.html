<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="assets/jquery.js"></script>
    <script src="lib/utils.js"></script>
    <script src="lib/surveyObject.js"></script>
    <script src="lib/checkBox.js"></script>
    <script src="lib/dropDown.js"></script>
    <script src="lib/radioButton.js"></script>
    <script src="lib/openEnded.js"></script>
    <script src="lib/yourSurvey.js"></script>
  </head>
  <body>


    <h1>Welcome to Michael's Survey Generator</h1>

    <span>Choose a survey type: </span>
    <select name="type" class="survey-type">
      <option value="Open Ended">Open Ended</option>
      <option value="Drop Down">Drop Down</option>
      <option value="Radio Button">Radio Button</option>
      <option value="Check Box">Check Box</option>
    </select>

    <br><br>
    <div class="current-question">

      <input class="question" type="text" name='open-ended' value='' placeholder="Enter a Question...">
      <br><br>
    </div>

    <br><br>
    <button class="add-item">Add Question to Your Survey</button>
    <br><br>
    <a href="yourSurvey.html">Take Survey</a>

    <br><br>
    <button class='print-current-survey-to-console'>Print Current Survey Objects to Console</button>

    <br><br>
    <button class="take-survey">Take Survey!</button>
    <br><br>

    <form>
      <div class="survey-items-container"></div>
    </form>

  </body>
</html>

<script type="text/javascript">
  // changes survey type will trigger a different type of survey to be added
  $('.survey-type').change(function() {
    var type = $('select').val();
    var domElement = $('.current-question')
    Survey.Utils.renderInputs(type, domElement)
  })

  // creates new survey
  var yourSurvey = new Survey.YourSurvey();
  var id = 1;
  //adds current question to your survey when add question button is clicked
  $('.add-item').click(function() {
    var selections = []
    $('.option').each(function(i, option) { selections.push($(option).val()) })
    yourSurvey.add($('select').val(), $('.question').val(), selections, id)
    id += 1;
  })


  $('.print-current-survey-to-console').click(function() {
    yourSurvey.list.forEach(function(el) {
      console.log(el);
      console.log(el.args);
    })
  })

  // adds extra options textfield on click
  $(document).on('click', '.add-option', function() {
    var option = "<input class='option' type='text' placeholder='new option item...'>"
    var button = '<br><button class="add-option"> + Add an option</button>'
    $('.add-option').remove()
    $('.current-question').append(option, button)
  });

  // take survey
  $('.take-survey').click(function(){
    $('.survey-items-container').append("<h2>Your Survey<h2>")
    yourSurvey.takeSurvey();
  })


</script>
